# 단일 책임 원칙을 따르는 클래스 디자인하기

- 객체지향 시스템의 근간을 이루는 것은 메세지(`message`)지만 가장 눈에 띄는 구조는 클래스.
- **클래스는 단순해야함.**
  - 지금 당장 해야할 일을 할 줄 암.
  - 나중에도 쉽게 수정할 수 있음.

## 무엇을 클래스에 넣을지 결정하기

- ### 메서드들을 묶어 클래스로 만들기
  - 주어진 상상의 범위 밖에서는 사고하기 힘든 하나의 박스를 만드는 것.
  - 프로젝트 초기 단계에서 메서드를 제대로 묶어내기 어려움.
  - 코드의 수정 가능성을 보존하는 기술(디자인) 적용.
- ### 수정하기 쉽도록 코드를 구성하기
  - #### 수정하기 쉽다의 정의
    - 수정이 예상치 못한 부작용을 낳지 않음.
    - 요구사항이 조금 변했을 때 연관된 코드들만 조금 수정하면 됨.
    - 현재 코드를 다시 사용하기 쉬움.
    - 코드를 수정하는 가장 쉬운 방법은 이미 수정하기 쉬운 코드에 새로운 코드를 추가하는 것.
  - #### 우리가 작성해야할 코드의 특징(`TRUE` 코드)
    - 투명하다(`Transparent`): 수정된 코드, 연관된 코드 속에서 수정의 결과가 뚜렷하게 드러나야 함.
    - 적절하다(`Reasonable`): 모든 수정 비용은 수정 결과를 통해 얻은 이득에 비례해야 함.
    - 사용가능하다(`Usable`): 예상치 못한 새로운 상황에서도 현재 코드를 사용할 수 있어야 함.
    - 모범이 된다(`Exemplary`): 코드 자체가 나중에 수정하는 사람이 위의 특징을 이어갈 수 있게 도와줘야 함.

## 하나의 책임만을 지는 클래스 만들기

> 클래스는 최대한 작으면서도 유용한 것(`smallest possible useful thing`). 하나의 책임만 있어야 함.

### 단일 책임 원칙은 왜 중요한가

- 쉽게 수정할 수 있는 애플리케이션은 재사용하기 쉬운 클래스(쉽게 가져다 쓸 수 있는 코드)로 구성.
- 한 개 이상의 책임이 있는 클래스는 재사용이 어려움.
  - 클래스 속에서 여러 책임들은 서로 얽혀 있을(결합, `coupled`) 가능성이 높음.
  - 특정 행동만 사용하고 싶어도 원하는 부분만 가져오기 어려움.
    > 이 경우 복사해서 사용 => 중복 코드 발생으로 유지보수 어려움 및 버그 유발.  
    > 클래스 전체를 가져다 씀 => 하나의 문제를 다른 문제로 가리는 것에 불과.
  - 재사용할 생각이 없어도 수정해야하는 경우 발생.

### 클래스에 하나의 책임만 있는지 알아보기

1. 클래스가 구현하고 있는 모든 메서드를 하나씩 질문 형태로 바꾸어 봄.
   - 다른 객체들의 관점에서 보면 그저 메세지에 반응하는 것.
   - 해당 클래스의 코드가 변경되었을 때 메세지를 보내던 객체는 당혹스런 상태에 빠짐. => 버그
2. 클래스의 책임을 한 문장으로 만들어 보는 것.
   - '그리고'와 같은 단어를 사용한다면 하나 이상의 책임을 가지고 있을 가능성.
   - '또는'과 같은 단어를 사용한다면 서로 연관되지도 않은 둘 이상의 책임을 가지고 있음.

> 응집력(`cohesion`), 클래스 안의 모든 것들이 하나의 핵심 목표와 연관되어 있을 때 이 클래스는 "강하게 응집되어 있다.(`highly cohesive`)", "하나의 책임만을 갖는다."고 할 수 있음.

#### 단일 책임 원칙

단일 책임 원칙(`SRP`)은 책임 주도 디자인(`RDD`)에 기원을 두고 있음.

> 클래스가 매우 협소한 한 가지 역할을 해야한다는 것, 사소한 수정만 해야 한다는 것이 아닌, **클래스가 응집되어 있어야 한다**는 의미.  
> 다시 말해서, 그 클래스의 모든 활동은 그 존재 이유와 밀접히 연관되어 있어야 함.

### 언제 디자인을 결정할지 판단하기

- 현재 클래스의 디자인이 훌륭하지 않더라도, 미래를 예측할 수 없기에 더 많은 정보를 얻을 때까지 기다리는 것이 가장 비용-효율적인 접근.
- **다른 객체와 의존성이 생긴**다면 투명함과 적절함을 잃게 되고, 바로 그 순간이 **코드 재구성을 재구성**해야 할 때.
- 새로운 의존성이 좋은 디자인을 결정하기 위한 정보를 제공.
- 현재 클래스의 구조는 미래의 개발자에게 지금의 디자인 의도를 전달하는 메세지.

## 변화를 받아들일 수 있는 코드 작성하기

- ### 데이터(`data`)가 아니라 행동(`behavior`)에 기반한 코드를 작성하라.
- ### 모든 곳에 단일 책임 원칙을 강제하라.